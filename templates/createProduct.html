{% extends "base.html" %}

{% block title %}Add products{% endblock %}

{% block content %}


<script>
$(document).ready(function(){
    $("#id_product_name").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "/get-steam-app-list/",
                dataType: "json",
                success: function(data) {
                    var appList = data.applist.apps;
                    var filteredApps = $.map(appList, function(app) {
                        if (app.name.toLowerCase().startsWith(request.term.toLowerCase())) {
                            return {
                                label: app.name,
                                value: app.name
                            };
                        }
                    });
                    var maxResults = 10;
                    response(filteredApps.slice(0, maxResults));
                }
            });
        },
        minLength: 2 
    });
});

</script>

{% if user.is_authenticated %}
    Add your Steam products here

    {% csrf_token %}
    <table>
        <tr>
            <td>
                Name:
                <input id="id_product_name" placeholder="Name" name="name"/> (autocomplete)
            </td>
        </tr>
        <tr>
            <td>
                Id:
                <input id="id_product_appId" placeholder="Id" name="appId"/>
            </td>
        </tr>
        <tr>
            <td>
                Type:
                <input id="id_product_type" placeholder="Type" name="type"/>
            </td>
        </tr>
        <tr>
            <td>
                Age:
                <input id="id_product_age" placeholder="Age" name="age"/>
            </td>
        </tr>
        <tr>
            <td>Free:
                <input id="id_product_free"  name="free" type="checkbox"/>
            </td>
        </tr>
        <tr>
            <td>
                Recommendations:
                <input id="id_product_recommendations" placeholder="Recommendations" name="recommendations"/>
            </td>
        </tr>
        <tr>
            <td>
                ReleaseDate:
                <input id="id_product_releaseDate" placeholder="ReleaseDate" name="releaseDate"/>
            </td>
        </tr>
        <tr>
            <td>
                Categories:
                <input id="id_product_categories" placeholder="Categories" name="categories"/>
            </td>
        </tr>
        <tr>
            <td>
                Genres:
                <input id="id_product_genres" placeholder="Genres" name="genres"/>
            </td>
        </tr>
        <tr>
            <td>
                Price:
                <input id="id_product_price" placeholder="Price" name="price"/>
            </td>
        </tr>
        <tr>
            <td>
                Discount:
                <input id="id_product_discount" placeholder="Discount" name="discount"/>
            </td>
        </tr>
        <tr>
            <td>
                Languages:
                <input id="id_product_languages" placeholder="Languages" name="languages"/>
            </td>
        </tr>
        <tr>
            <td>
                Owners:
                <input id="id_product_owners" placeholder="Owners" name="owners"/>
            </td>
        </tr>
        <tr>
            <td>
                Description:
                <input id="id_product_description" placeholder="Description" name="description"/>
            </td>
        </tr>
    </table>


{% else %}
    <p>You are not logged in</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'signup' %}">Sign Up</a>
{% endif %}
{% endblock %}
